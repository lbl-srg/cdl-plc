<?xml version="1.0" ?>
<project xmlns="http://www.plcopen.org/xml/tc6_0201" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:ns1="http://www.plcopen.org/xml/tc6_0201">
	<fileHeader companyName="Unknown" productName="Unnamed" productVersion="1" creationDateTime="2024-01-09T16:45:07"/>
	<contentHeader name="Unnamed" modificationDateTime="2024-01-23T14:31:54">
		<coordinateInfo>
			<fbd>
				<scaling x="0" y="0"/>
			</fbd>
			<ld>
				<scaling x="0" y="0"/>
			</ld>
			<sfc>
				<scaling x="0" y="0"/>
			</sfc>
		</coordinateInfo>
	</contentHeader>
	<types>
		<dataTypes/>
		<pous>
			<pou name="PID_renamed" pouType="program">
				<interface>
					<inputVars>
						<variable name="u_m">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="u_s">
							<type>
								<REAL/>
							</type>
						</variable>
					</inputVars>
					<outputVars>
						<variable name="y">
							<type>
								<REAL/>
							</type>
						</variable>
					</outputVars>
					<localVars>
						<variable name="conPID">
							<type>
								<derived name="Reals_PID"/>
							</type>
						</variable>
						<variable name="_1">
							<type>
								<REAL/>
							</type>
							<initialValue>
								<simpleValue value="1.0"/>
							</initialValue>
						</variable>
						<variable name="_True">
							<type>
								<BOOL/>
							</type>
							<initialValue>
								<simpleValue value="True"/>
							</initialValue>
						</variable>
						<variable name="_100">
							<type>
								<REAL/>
							</type>
							<initialValue>
								<simpleValue value="100.0"/>
							</initialValue>
						</variable>
						<variable name="_0">
							<type>
								<REAL/>
							</type>
							<initialValue>
								<simpleValue value="0.0"/>
							</initialValue>
						</variable>
					</localVars>
				</interface>
				<body>
					<FBD>
						<inVariable localId="2" executionOrderId="0" width="34" height="26" negated="false">
							<position x="0" y="164"/>
							<connectionPointOut>
								<relPosition x="34" y="13"/>
							</connectionPointOut>
							<expression>u_m</expression>
						</inVariable>
						<inVariable localId="3" executionOrderId="0" width="34" height="26" negated="false">
							<position x="0" y="0"/>
							<connectionPointOut>
								<relPosition x="34" y="13"/>
							</connectionPointOut>
							<expression>u_s</expression>
						</inVariable>
						<inVariable localId="8" executionOrderId="0" width="26" height="26" negated="false">
							<position x="474" y="177"/>
							<connectionPointOut>
								<relPosition x="26" y="13"/>
							</connectionPointOut>
							<expression>_1</expression>
						</inVariable>
						<inVariable localId="6" executionOrderId="0" width="50" height="26" negated="false">
							<position x="450" y="137"/>
							<connectionPointOut>
								<relPosition x="50" y="13"/>
							</connectionPointOut>
							<expression>_True</expression>
						</inVariable>
						<inVariable localId="7" executionOrderId="0" width="42" height="26" negated="false">
							<position x="458" y="157"/>
							<connectionPointOut>
								<relPosition x="42" y="13"/>
							</connectionPointOut>
							<expression>_100</expression>
						</inVariable>
						<inVariable localId="9" executionOrderId="0" width="26" height="26" negated="false">
							<position x="474" y="197"/>
							<connectionPointOut>
								<relPosition x="26" y="13"/>
							</connectionPointOut>
							<expression>_0</expression>
						</inVariable>
						<block localId="1" typeName="Reals_PID" instanceName="conPID" executionOrderId="0" width="82" height="160">
							
	
							<position x="520" y="60"/>
							
	
							<inputVariables>
								
		
								<variable formalParameter="u_m">
									<connectionPointIn>
										<relPosition x="0" y="30"/>
										<connection refLocalId="2">
											<position x="520" y="90"/>
											<position x="260" y="90"/>
											<position x="260" y="164"/>
											<position x="0" y="164"/>
										</connection>
									</connectionPointIn>
								</variable>
								<variable formalParameter="u_s">
									<connectionPointIn>
										<relPosition x="0" y="50"/>
										<connection refLocalId="3">
											<position x="520" y="110"/>
											<position x="260" y="110"/>
											<position x="260" y="0"/>
											<position x="0" y="0"/>
										</connection>
									</connectionPointIn>
								</variable>
								<variable formalParameter="k">
									<connectionPointIn>
										<relPosition x="0" y="70"/>
										<connection refLocalId="8">
											<position x="520" y="130"/>
											<position x="510" y="130"/>
											<position x="510" y="130"/>
											<position x="500" y="130"/>
										</connection>
									</connectionPointIn>
								</variable>
								<variable formalParameter="reverseActing">
									<connectionPointIn>
										<relPosition x="0" y="90"/>
										<connection refLocalId="6">
											<position x="520" y="150"/>
											<position x="510" y="150"/>
											<position x="510" y="150"/>
											<position x="500" y="150"/>
										</connection>
									</connectionPointIn>
								</variable>
								<variable formalParameter="Ti">
									<connectionPointIn>
										<relPosition x="0" y="110"/>
										<connection refLocalId="7">
											<position x="520" y="170"/>
											<position x="510" y="170"/>
											<position x="510" y="170"/>
											<position x="500" y="170"/>
										</connection>
									</connectionPointIn>
								</variable>
								<variable formalParameter="yMax">
									<connectionPointIn>
										<relPosition x="0" y="130"/>
										<connection refLocalId="8">
											<position x="520" y="190"/>
											<position x="510" y="190"/>
											<position x="510" y="190"/>
											<position x="500" y="190"/>
										</connection>
									</connectionPointIn>
								</variable>
								<variable formalParameter="yMin">
									<connectionPointIn>
										<relPosition x="0" y="150"/>
										<connection refLocalId="9">
											<position x="520" y="210"/>
											<position x="510" y="210"/>
											<position x="510" y="210"/>
											<position x="500" y="210"/>
										</connection>
									</connectionPointIn>
								</variable>
								
	
							</inputVariables>
							
	
							<inOutVariables/>
							
	
							<outputVariables>
								
		
								<variable formalParameter="y">
									<connectionPointOut>
										<relPosition x="82" y="30"/>
									</connectionPointOut>
								</variable>
								
	
							</outputVariables>
							

						</block>
						<outVariable localId="4" executionOrderId="0" width="18" height="26" negated="false">
							<position x="960" y="40"/>
							<connectionPointIn>
								<relPosition x="0" y="22"/>
								<connection refLocalId="1" formalParameter="y">
									<position x="960" y="53"/>
									<position x="781" y="53"/>
									<position x="781" y="90"/>
									<position x="602" y="90"/>
								</connection>
							</connectionPointIn>
							<expression>y</expression>
						</outVariable>
					</FBD>
				</body>
			</pou>
			      
			<pou name="Reals_PID" pouType="functionBlock">
				
        
				<interface>
					
          
					<inputVars>
						
            
						<variable name="u_s">
							
              
							<type>
								
                
								<REAL/>
								
              
							</type>
							
            
						</variable>
						
            
						<variable name="u_m">
							
              
							<type>
								
                
								<REAL/>
								
              
							</type>
							
            
						</variable>
						
          
					</inputVars>
					
          
					<outputVars>
						
            
						<variable name="y">
							
              
							<type>
								
                
								<REAL/>
								
              
							</type>
							
            
						</variable>
						
          
					</outputVars>
					
          
					<localVars>
						
            
						<variable name="Ni">
							
              
							<type>
								
                
								<REAL/>
								
              
							</type>
							
              
							<initialValue>
								
                
								<simpleValue value="0.9"/>
								
              
							</initialValue>
							
            
						</variable>
						
            
						<variable name="_05">
							
              
							<type>
								
                
								<REAL/>
								
              
							</type>
							
              
							<initialValue>
								
                
								<simpleValue value="0.5"/>
								
              
							</initialValue>
							
            
						</variable>
						
            
						<variable name="_2">
							
              
							<type>
								
                
								<REAL/>
								
              
							</type>
							
              
							<initialValue>
								
                
								<simpleValue value="2.0"/>
								
              
							</initialValue>
							
            
						</variable>
						
            
						<variable name="_0">
							
              
							<type>
								
                
								<REAL/>
								
              
							</type>
							
              
							<initialValue>
								
                
								<simpleValue value="0.0"/>
								
              
							</initialValue>
							
            
						</variable>
						
            
						<variable name="_1">
							
              
							<type>
								
                
								<REAL/>
								
              
							</type>
							
              
							<initialValue>
								
                
								<simpleValue value="1.0"/>
								
              
							</initialValue>
							
            
						</variable>
						
            
						<variable name="r_range">
							
              
							<type>
								
                
								<REAL/>
								
              
							</type>
							
              
							<initialValue>
								
                
								<simpleValue value="1.0"/>
								
              
							</initialValue>
							
            
						</variable>
						
            
						<variable name="revAct">
							
              
							<type>
								
                
								<REAL/>
								
              
							</type>
							
              
							<initialValue>
								
                
								<simpleValue value="1.0"/>
								
              
							</initialValue>
							
            
						</variable>
						
            
						<variable name="uMea_revAct">
							
              
							<type>
								
                
								<derived name="Reals_MultiplyByParameter"/>
								
              
							</type>
							
            
						</variable>
						
            
						<variable name="uS_revAct">
							
              
							<type>
								
                
								<derived name="Reals_MultiplyByParameter"/>
								
              
							</type>
							
            
						</variable>
						
          
					</localVars>
					
          
					<inputVars>
						
            
						<variable name="k">
							
              
							<type>
								
                
								<REAL/>
								
              
							</type>
							
            
						</variable>
						
            
						<variable name="Ti">
							
              
							<type>
								
                
								<REAL/>
								
              
							</type>
							
            
						</variable>
						
            
						<variable name="reverseActing">
							
              
							<type>
								
                
								<BOOL/>
								
              
							</type>
							
            
						</variable>
						
            
						<variable name="yMin">
							
              
							<type>
								
                
								<REAL/>
								
              
							</type>
							
            
						</variable>
						
            
						<variable name="yMax">
							
              
							<type>
								
                
								<REAL/>
								
              
							</type>
							
            
						</variable>
						
          
					</inputVars>
					
          
					<localVars>
						
            
						<variable name="Reals_MultiplyByParameter0">
							
              
							<type>
								
                
								<derived name="Reals_MultiplyByParameter"/>
								
              
							</type>
							
            
						</variable>
						
            
						<variable name="Reals_Limiter0">
							
              
							<type>
								
                
								<derived name="Reals_Limiter"/>
								
              
							</type>
							
            
						</variable>
						
            
						<variable name="INTEGRATE0">
							
              
							<type>
								
                
								<derived name="INTEGRATE"/>
								
              
							</type>
							
            
						</variable>
						
            
						<variable name="antWinGai">
							
              
							<type>
								
                
								<derived name="Reals_MultiplyByParameter"/>
								
              
							</type>
							
            
						</variable>
						
          
					</localVars>
					
        
				</interface>
				
        
				<body>
					
          
					<FBD>
						
            
						<inVariable localId="1" executionOrderId="0" height="26" width="34" negated="false">
							
              
							<position x="147" y="137"/>
							
              
							<connectionPointOut>
								
                
								<relPosition x="34" y="13"/>
								
              
							</connectionPointOut>
							
              
							<expression>u_s</expression>
							
            
						</inVariable>
						
            
						<inVariable localId="2" executionOrderId="0" height="26" width="35" negated="false">
							
              
							<position x="137" y="412"/>
							
              
							<connectionPointOut>
								
                
								<relPosition x="35" y="13"/>
								
              
							</connectionPointOut>
							
              
							<expression>u_m</expression>
							
            
						</inVariable>
						
            
						<outVariable localId="3" executionOrderId="0" height="26" width="18" negated="false">
							
              
							<position x="2359" y="324"/>
							
              
							<connectionPointIn>
								
                
								<relPosition x="0" y="13"/>
								
                
								<connection refLocalId="16" formalParameter="y">
									
                  
									<position x="2359" y="337"/>
									
                  
									<position x="1683" y="337"/>
									
                  
									<position x="1683" y="269"/>
									
                  
									<position x="1547" y="269"/>
									
                
								</connection>
								
              
							</connectionPointIn>
							
              
							<expression>y</expression>
							
            
						</outVariable>
						
            
						<block localId="4" typeName="SUB" executionOrderId="0" height="60" width="63">
							
              
							<position x="383" y="212"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="IN1">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                    
										<connection refLocalId="1">
											
                      
											<position x="383" y="242"/>
											
                      
											<position x="253" y="242"/>
											
                      
											<position x="253" y="150"/>
											
                      
											<position x="181" y="150"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="IN2">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="50"/>
										
                    
										<connection refLocalId="2">
											
                      
											<position x="383" y="262"/>
											
                      
											<position x="300" y="262"/>
											
                      
											<position x="300" y="425"/>
											
                      
											<position x="172" y="425"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="OUT">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="63" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<block localId="5" typeName="Reals_MultiplyByParameter" instanceName="uMea_revAct" executionOrderId="0" height="60" width="210">
							
              
							<position x="381" y="315"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="u">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                    
										<connection refLocalId="2">
											
                      
											<position x="381" y="345"/>
											
                      
											<position x="265" y="345"/>
											
                      
											<position x="265" y="425"/>
											
                      
											<position x="172" y="425"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="k">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="50"/>
										
                    
										<connection refLocalId="30" formalParameter="OUT">
											
                      
											<position x="381" y="365"/>
											
                      
											<position x="365" y="365"/>
											
                      
											<position x="365" y="609"/>
											
                      
											<position x="1056" y="609"/>
											
                      
											<position x="1056" y="853"/>
											
                      
											<position x="1046" y="853"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="y">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="210" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<block localId="7" typeName="Reals_MultiplyByParameter" instanceName="uS_revAct" executionOrderId="0" height="60" width="210">
							
              
							<position x="383" y="95"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="u">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                    
										<connection refLocalId="1">
											
                      
											<position x="383" y="125"/>
											
                      
											<position x="282" y="125"/>
											
                      
											<position x="282" y="150"/>
											
                      
											<position x="181" y="150"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="k">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="50"/>
										
                    
										<connection refLocalId="30" formalParameter="OUT">
											
                      
											<position x="383" y="145"/>
											
                      
											<position x="343" y="145"/>
											
                      
											<position x="343" y="499"/>
											
                      
											<position x="1056" y="499"/>
											
                      
											<position x="1056" y="853"/>
											
                      
											<position x="1046" y="853"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="y">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="210" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<block localId="11" typeName="SUB" executionOrderId="0" height="60" width="63">
							
              
							<position x="722" y="213"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="IN1">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                    
										<connection refLocalId="7" formalParameter="y">
											
                      
											<position x="722" y="243"/>
											
                      
											<position x="664" y="243"/>
											
                      
											<position x="664" y="125"/>
											
                      
											<position x="593" y="125"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="IN2">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="50"/>
										
                    
										<connection refLocalId="5" formalParameter="y">
											
                      
											<position x="722" y="263"/>
											
                      
											<position x="663" y="263"/>
											
                      
											<position x="663" y="345"/>
											
                      
											<position x="591" y="345"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="OUT">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="63" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<block localId="12" typeName="SUB" executionOrderId="0" height="60" width="63">
							
              
							<position x="748" y="25"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="IN1">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                    
										<connection refLocalId="7" formalParameter="y">
											
                      
											<position x="748" y="55"/>
											
                      
											<position x="633" y="55"/>
											
                      
											<position x="633" y="125"/>
											
                      
											<position x="593" y="125"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="IN2">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="50"/>
										
                    
										<connection refLocalId="5" formalParameter="y">
											
                      
											<position x="748" y="75"/>
											
                      
											<position x="634" y="75"/>
											
                      
											<position x="634" y="345"/>
											
                      
											<position x="591" y="345"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="OUT">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="63" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<block localId="13" typeName="Reals_MultiplyByParameter" instanceName="Reals_MultiplyByParameter0" executionOrderId="0" height="60" width="210">
							
              
							<position x="920" y="50"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="u">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                    
										<connection refLocalId="12" formalParameter="OUT">
											
                      
											<position x="920" y="80"/>
											
                      
											<position x="865" y="80"/>
											
                      
											<position x="865" y="55"/>
											
                      
											<position x="811" y="55"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="k">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="50"/>
										
                    
										<connection refLocalId="14">
											
                      
											<position x="920" y="100"/>
											
                      
											<position x="888" y="100"/>
											
                      
											<position x="888" y="117"/>
											
                      
											<position x="857" y="117"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="y">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="210" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<inVariable localId="14" executionOrderId="0" height="26" width="18" negated="false">
							
              
							<position x="839" y="104"/>
							
              
							<connectionPointOut>
								
                
								<relPosition x="18" y="13"/>
								
              
							</connectionPointOut>
							
              
							<expression>k</expression>
							
            
						</inVariable>
						
            
						<block localId="15" typeName="ADD" executionOrderId="0" height="60" width="63">
							
              
							<position x="1272" y="155"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="IN1">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                    
										<connection refLocalId="13" formalParameter="y">
											
                      
											<position x="1272" y="185"/>
											
                      
											<position x="1201" y="185"/>
											
                      
											<position x="1201" y="80"/>
											
                      
											<position x="1130" y="80"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="IN2">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="50"/>
										
                    
										<connection refLocalId="20" formalParameter="Y">
											
                      
											<position x="1272" y="205"/>
											
                      
											<position x="1168" y="205"/>
											
                      
											<position x="1168" y="264"/>
											
                      
											<position x="1102" y="264"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="OUT">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="63" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<block localId="16" typeName="Reals_Limiter" instanceName="Reals_Limiter0" executionOrderId="0" height="80" width="114">
							
              
							<position x="1433" y="239"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="u">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                    
										<connection refLocalId="15" formalParameter="OUT">
											
                      
											<position x="1433" y="269"/>
											
                      
											<position x="1384" y="269"/>
											
                      
											<position x="1384" y="185"/>
											
                      
											<position x="1335" y="185"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="uMax">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="50"/>
										
                    
										<connection refLocalId="18">
											
                      
											<position x="1433" y="289"/>
											
                      
											<position x="1402" y="289"/>
											
                      
											<position x="1402" y="293"/>
											
                      
											<position x="1371" y="293"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="uMin">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="70"/>
										
                    
										<connection refLocalId="17">
											
                      
											<position x="1433" y="309"/>
											
                      
											<position x="1405" y="309"/>
											
                      
											<position x="1405" y="338"/>
											
                      
											<position x="1378" y="338"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="y">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="114" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<inVariable localId="17" executionOrderId="0" height="26" width="42" negated="false">
							
              
							<position x="1336" y="325"/>
							
              
							<connectionPointOut>
								
                
								<relPosition x="42" y="13"/>
								
              
							</connectionPointOut>
							
              
							<expression>yMin</expression>
							
            
						</inVariable>
						
            
						<inVariable localId="18" executionOrderId="0" height="26" width="42" negated="false">
							
              
							<position x="1329" y="280"/>
							
              
							<connectionPointOut>
								
                
								<relPosition x="42" y="13"/>
								
              
							</connectionPointOut>
							
              
							<expression>yMax</expression>
							
            
						</inVariable>
						
            
						<block localId="19" typeName="SUB" executionOrderId="0" height="60" width="63">
							
              
							<position x="1627" y="449"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="IN1">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                    
										<connection refLocalId="15" formalParameter="OUT">
											
                      
											<position x="1627" y="479"/>
											
                      
											<position x="1601" y="479"/>
											
                      
											<position x="1601" y="185"/>
											
                      
											<position x="1335" y="185"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="IN2">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="50"/>
										
                    
										<connection refLocalId="16" formalParameter="y">
											
                      
											<position x="1627" y="499"/>
											
                      
											<position x="1588" y="499"/>
											
                      
											<position x="1588" y="269"/>
											
                      
											<position x="1547" y="269"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="OUT">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="63" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<block localId="20" typeName="INTEGRATE" instanceName="INTEGRATE0" executionOrderId="0" height="100" width="82">
							
              
							<position x="1020" y="234"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="_E">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="X">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="50"/>
										
                    
										<connection refLocalId="21" formalParameter="OUT">
											
                      
											<position x="1020" y="284"/>
											
                      
											<position x="942" y="284"/>
											
                      
											<position x="942" y="276"/>
											
                      
											<position x="904" y="276"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="K">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="70"/>
										
                    
										<connection refLocalId="32" formalParameter="OUT">
											
                      
											<position x="1020" y="304"/>
											
                      
											<position x="1001" y="304"/>
											
                      
											<position x="1001" y="326"/>
											
                      
											<position x="977" y="326"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="Y">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="90"/>
										
                    
										<connection refLocalId="35">
											
                      
											<position x="1020" y="324"/>
											
                      
											<position x="1009" y="324"/>
											
                      
											<position x="1009" y="418"/>
											
                      
											<position x="949" y="418"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="Y">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="82" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<block localId="9" typeName="Reals_MultiplyByParameter" instanceName="antWinGai" executionOrderId="0" height="60" width="210">
							
              
							<position x="1773" y="491"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="u">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                    
										<connection refLocalId="19" formalParameter="OUT">
											
                      
											<position x="1773" y="521"/>
											
                      
											<position x="1731" y="521"/>
											
                      
											<position x="1731" y="479"/>
											
                      
											<position x="1690" y="479"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="k">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="50"/>
										
                    
										<connection refLocalId="37" formalParameter="OUT">
											
                      
											<position x="1773" y="541"/>
											
                      
											<position x="1611" y="541"/>
											
                      
											<position x="1611" y="546"/>
											
                      
											<position x="1449" y="546"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="y">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="210" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<block localId="21" typeName="SUB" executionOrderId="0" height="60" width="63">
							
              
							<position x="841" y="246"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="IN1">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                    
										<connection refLocalId="11" formalParameter="OUT">
											
                      
											<position x="841" y="276"/>
											
                      
											<position x="813" y="276"/>
											
                      
											<position x="813" y="243"/>
											
                      
											<position x="785" y="243"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="IN2">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="50"/>
										
                    
										<connection refLocalId="9" formalParameter="y">
											
                      
											<position x="841" y="296"/>
											
                      
											<position x="769" y="296"/>
											
                      
											<position x="769" y="645"/>
											
                      
											<position x="1993" y="645"/>
											
                      
											<position x="1993" y="521"/>
											
                      
											<position x="1983" y="521"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="OUT">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="63" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<inVariable localId="22" executionOrderId="0" height="26" width="114" negated="false">
							
              
							<position x="169" y="753"/>
							
              
							<connectionPointOut>
								
                
								<relPosition x="114" y="13"/>
								
              
							</connectionPointOut>
							
              
							<expression>reverseActing</expression>
							
            
						</inVariable>
						
            
						<block localId="23" typeName="BOOL_TO_REAL" executionOrderId="0" height="40" width="106">
							
              
							<position x="349" y="753"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="IN">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                    
										<connection refLocalId="22">
											
                      
											<position x="349" y="783"/>
											
                      
											<position x="293" y="783"/>
											
                      
											<position x="293" y="766"/>
											
                      
											<position x="283" y="766"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="OUT">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="106" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<block localId="24" typeName="SUB" executionOrderId="0" height="60" width="63">
							
              
							<position x="511" y="777"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="IN1">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                    
										<connection refLocalId="23" formalParameter="OUT">
											
                      
											<position x="511" y="807"/>
											
                      
											<position x="465" y="807"/>
											
                      
											<position x="465" y="783"/>
											
                      
											<position x="455" y="783"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="IN2">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="50"/>
										
                    
										<connection refLocalId="27">
											
                      
											<position x="511" y="827"/>
											
                      
											<position x="476" y="827"/>
											
                      
											<position x="476" y="846"/>
											
                      
											<position x="441" y="846"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="OUT">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="63" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<block localId="25" typeName="MUL" executionOrderId="0" height="60" width="63">
							
              
							<position x="659" y="811"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="IN1">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                    
										<connection refLocalId="24" formalParameter="OUT">
											
                      
											<position x="659" y="841"/>
											
                      
											<position x="595" y="841"/>
											
                      
											<position x="595" y="807"/>
											
                      
											<position x="574" y="807"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="IN2">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="50"/>
										
                    
										<connection refLocalId="28">
											
                      
											<position x="659" y="861"/>
											
                      
											<position x="627" y="861"/>
											
                      
											<position x="627" y="884"/>
											
                      
											<position x="596" y="884"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="OUT">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="63" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<inOutVariable localId="26" executionOrderId="0" height="26" width="58" negatedOut="false" negatedIn="false">
							
              
							<position x="852" y="810"/>
							
              
							<connectionPointIn>
								
                
								<relPosition x="0" y="13"/>
								
                
								<connection refLocalId="25" formalParameter="OUT">
									
                  
									<position x="852" y="823"/>
									
                  
									<position x="772" y="823"/>
									
                  
									<position x="772" y="841"/>
									
                  
									<position x="722" y="841"/>
									
                
								</connection>
								
              
							</connectionPointIn>
							
              
							<connectionPointOut>
								
                
								<relPosition x="58" y="13"/>
								
              
							</connectionPointOut>
							
              
							<expression>revAct</expression>
							
            
						</inOutVariable>
						
            
						<inVariable localId="27" executionOrderId="0" height="26" width="42" negated="false">
							
              
							<position x="399" y="833"/>
							
              
							<connectionPointOut>
								
                
								<relPosition x="42" y="13"/>
								
              
							</connectionPointOut>
							
              
							<expression>_05</expression>
							
            
						</inVariable>
						
            
						<inVariable localId="28" executionOrderId="0" height="26" width="42" negated="false">
							
              
							<position x="554" y="871"/>
							
              
							<connectionPointOut>
								
                
								<relPosition x="42" y="13"/>
								
              
							</connectionPointOut>
							
              
							<expression>_2</expression>
							
            
						</inVariable>
						
            
						<inVariable localId="29" executionOrderId="0" height="26" width="66" negated="false">
							
              
							<position x="834" y="875"/>
							
              
							<connectionPointOut>
								
                
								<relPosition x="66" y="13"/>
								
              
							</connectionPointOut>
							
              
							<expression>r_range</expression>
							
            
						</inVariable>
						
            
						<block localId="30" typeName="DIV" executionOrderId="0" height="60" width="63">
							
              
							<position x="983" y="823"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="IN1">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                    
										<connection refLocalId="26">
											
                      
											<position x="983" y="853"/>
											
                      
											<position x="946" y="853"/>
											
                      
											<position x="946" y="823"/>
											
                      
											<position x="910" y="823"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="IN2">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="50"/>
										
                    
										<connection refLocalId="29">
											
                      
											<position x="983" y="873"/>
											
                      
											<position x="941" y="873"/>
											
                      
											<position x="941" y="888"/>
											
                      
											<position x="900" y="888"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="OUT">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="63" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<block localId="32" typeName="DIV" executionOrderId="0" height="60" width="63">
							
              
							<position x="914" y="296"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="IN1">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                    
										<connection refLocalId="33">
											
                      
											<position x="914" y="326"/>
											
                      
											<position x="868" y="326"/>
											
                      
											<position x="868" y="359"/>
											
                      
											<position x="817" y="359"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="IN2">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="50"/>
										
                    
										<connection refLocalId="34">
											
                      
											<position x="914" y="346"/>
											
                      
											<position x="868" y="346"/>
											
                      
											<position x="868" y="419"/>
											
                      
											<position x="818" y="419"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="OUT">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="63" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<inVariable localId="33" executionOrderId="0" height="26" width="18" negated="false">
							
              
							<position x="799" y="346"/>
							
              
							<connectionPointOut>
								
                
								<relPosition x="18" y="13"/>
								
              
							</connectionPointOut>
							
              
							<expression>k</expression>
							
            
						</inVariable>
						
            
						<inVariable localId="34" executionOrderId="0" height="26" width="26" negated="false">
							
              
							<position x="792" y="406"/>
							
              
							<connectionPointOut>
								
                
								<relPosition x="26" y="13"/>
								
              
							</connectionPointOut>
							
              
							<expression>Ti</expression>
							
            
						</inVariable>
						
            
						<inVariable localId="35" executionOrderId="0" height="26" width="42" negated="false">
							
              
							<position x="907" y="405"/>
							
              
							<connectionPointOut>
								
                
								<relPosition x="42" y="13"/>
								
              
							</connectionPointOut>
							
              
							<expression>_0</expression>
							
            
						</inVariable>
						
            
						<inVariable localId="36" executionOrderId="0" height="26" width="42" negated="false">
							
              
							<position x="1288" y="497"/>
							
              
							<connectionPointOut>
								
                
								<relPosition x="42" y="13"/>
								
              
							</connectionPointOut>
							
              
							<expression>_1</expression>
							
            
						</inVariable>
						
            
						<block localId="37" typeName="DIV" executionOrderId="0" height="60" width="63">
							
              
							<position x="1386" y="516"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="IN1">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                    
										<connection refLocalId="36">
											
                      
											<position x="1386" y="546"/>
											
                      
											<position x="1358" y="546"/>
											
                      
											<position x="1358" y="510"/>
											
                      
											<position x="1330" y="510"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="IN2">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="50"/>
										
                    
										<connection refLocalId="38" formalParameter="OUT">
											
                      
											<position x="1386" y="566"/>
											
                      
											<position x="1362" y="566"/>
											
                      
											<position x="1362" y="590"/>
											
                      
											<position x="1338" y="590"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="OUT">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="63" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<block localId="38" typeName="MUL" executionOrderId="0" height="60" width="63">
							
              
							<position x="1275" y="560"/>
							
              
							<inputVariables>
								
                
								<variable formalParameter="IN1">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="30"/>
										
                    
										<connection refLocalId="39">
											
                      
											<position x="1275" y="590"/>
											
                      
											<position x="1256" y="590"/>
											
                      
											<position x="1256" y="574"/>
											
                      
											<position x="1243" y="574"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
                
								<variable formalParameter="IN2">
									
                  
									<connectionPointIn>
										
                    
										<relPosition x="0" y="50"/>
										
                    
										<connection refLocalId="40">
											
                      
											<position x="1275" y="610"/>
											
                      
											<position x="1264" y="610"/>
											
                      
											<position x="1264" y="615"/>
											
                      
											<position x="1247" y="615"/>
											
                    
										</connection>
										
                  
									</connectionPointIn>
									
                
								</variable>
								
              
							</inputVariables>
							
              
							<inOutVariables/>
							
              
							<outputVariables>
								
                
								<variable formalParameter="OUT">
									
                  
									<connectionPointOut>
										
                    
										<relPosition x="63" y="30"/>
										
                  
									</connectionPointOut>
									
                
								</variable>
								
              
							</outputVariables>
							
            
						</block>
						
            
						<inVariable localId="39" executionOrderId="0" height="26" width="18" negated="false">
							
              
							<position x="1225" y="561"/>
							
              
							<connectionPointOut>
								
                
								<relPosition x="18" y="13"/>
								
              
							</connectionPointOut>
							
              
							<expression>k</expression>
							
            
						</inVariable>
						
            
						<inVariable localId="40" executionOrderId="0" height="26" width="26" negated="false">
							
              
							<position x="1221" y="602"/>
							
              
							<connectionPointOut>
								
                
								<relPosition x="26" y="13"/>
								
              
							</connectionPointOut>
							
              
							<expression>Ni</expression>
							
            
						</inVariable>
						
          
					</FBD>
					
        
				</body>
				
      
			</pou>
			

			<pou name="Reals_MultiplyByParameter" pouType="functionBlock">
				<interface>
					<inputVars>
						<variable name="u">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="k">
							<type>
								<REAL/>
							</type>
						</variable>
					</inputVars>
					<outputVars>
						<variable name="y">
							<type>
								<REAL/>
							</type>
						</variable>
					</outputVars>
				</interface>
				<body>
					<ST>
						<xhtml:p><![CDATA[y := k * u;]]></xhtml:p>
					</ST>
				</body>
			</pou>
			<pou name="Reals_Limiter" pouType="functionBlock">
				<interface>
					<inputVars>
						<variable name="u">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="uMax">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="uMin">
							<type>
								<REAL/>
							</type>
						</variable>
					</inputVars>
					<outputVars>
						<variable name="y">
							<type>
								<REAL/>
							</type>
						</variable>
					</outputVars>
				</interface>
				<body>
					<ST>
						<xhtml:p><![CDATA[y := min(uMax, max(uMin, u));]]></xhtml:p>
					</ST>
				</body>
			</pou>
			      
			<pou name="INTEGRATE" pouType="functionBlock">
				
        
				<interface>
					
          
					<inputVars>
						
            
						<variable name="_E">
							
              
							<type>
								
                
								<BOOL/>
								
              
							</type>
							
              
							<initialValue>
								
                
								<simpleValue value="TRUE"/>
								
              
							</initialValue>
							
            
						</variable>
						
            
						<variable name="X">
							
              
							<type>
								
                
								<REAL/>
								
              
							</type>
							
            
						</variable>
						
            
						<variable name="K">
							
              
							<type>
								
                
								<REAL/>
								
              
							</type>
							
              
							<initialValue>
								
                
								<simpleValue value="1.0"/>
								
              
							</initialValue>
							
            
						</variable>
						
          
					</inputVars>
					
          
					<inOutVars>
						
            
						<variable name="Y">
							
              
							<type>
								
                
								<REAL/>
								
              
							</type>
							
            
						</variable>
						
          
					</inOutVars>
					
          
					<localVars>
						
            
						<variable name="x_last">
							
              
							<type>
								
                
								<REAL/>
								
              
							</type>
							
            
						</variable>
						
            
						<variable name="init">
							
              
							<type>
								
                
								<BOOL/>
								
              
							</type>
							
            
						</variable>
						
            
						<variable name="last">
							
              
							<type>
								
                
								<UDINT/>
								
              
							</type>
							
            
						</variable>
						
            
						<variable name="tx">
							
              
							<type>
								
                
								<UDINT/>
								
              
							</type>
							
            
						</variable>
						
          
					</localVars>
					
        
				</interface>
				
        
				<body>
					
          
					<ST>
						
            
						<xhtml:p><![CDATA[tx:= T_PLC_MS(en:=true);

IF NOT init THEN
	init := TRUE;
	X_last := X;
ELSIF _E THEN
	Y := (X + X_LAST) * 0.5E-3 * UDINT_TO_REAL(tx-last) * K + Y;
	X_last := X;
END_IF;
last := tx;

(* From OSCAT Library, www.oscat.de *)
(* T_PLC_MS required *)]]></xhtml:p>
						
          
					</ST>
					
        
				</body>
				
        
				<documentation>
					
          
					<xhtml:p><![CDATA[integrate is a plain integrator with I/O for out]]></xhtml:p>
					
        
				</documentation>
				
      
			</pou>
			
      
			<pou name="T_PLC_MS" pouType="function">
				
        
				<interface>
					
          
					<returnType>
						
            
						<UDINT/>
						
          
					</returnType>
					
          
					<localVars>
						
            
						<variable name="tx">
							
              
							<type>
								
                
								<UDINT/>
								
              
							</type>
							
            
						</variable>
						
          
					</localVars>
					
          
					<inputVars>
						
            
						<variable name="debug">
							
              
							<type>
								
                
								<BOOL/>
								
              
							</type>
							
            
						</variable>
						
          
					</inputVars>
					
          
					<localVars>
						
            
						<variable name="N">
							
              
							<type>
								
                
								<INT/>
								
              
							</type>
							
              
							<initialValue>
								
                
								<simpleValue value="0"/>
								
              
							</initialValue>
							
            
						</variable>
						
            
						<variable name="offset">
							
              
							<type>
								
                
								<UDINT/>
								
              
							</type>
							
              
							<initialValue>
								
                
								<simpleValue value="0"/>
								
              
							</initialValue>
							
            
						</variable>
						
            
						<variable name="temp">
							
              
							<type>
								
                
								<DWORD/>
								
              
							</type>
							
              
							<initialValue>
								
                
								<simpleValue value="1"/>
								
              
							</initialValue>
							
            
						</variable>
						
          
					</localVars>
					
        
				</interface>
				
        
				<body>
					
          
					<ST>
						
            
						<xhtml:p><![CDATA[tx := 0;

{extern unsigned long __tick;
extern unsigned long long common_ticktime__;
unsigned long long ticktime_ms = (common_ticktime__)/1000000;
UDINT plc_time = (UDINT)(ticktime_ms * (unsigned long long)__tick);
TX = plc_time}

T_PLC_MS := tx;
IF debug THEN
	T_PLC_MS := (DWORD_TO_UDINT(SHL(UDINT_TO_DWORD(T_PLC_MS),N) OR SHL(temp,N))-1) + OFFSET;
END_IF;

(* Original Code:
tx := TIME();
T_PLC_MS := TIME_TO_DWORD(Tx);
IF debug THEN
	T_PLC_MS := (SHL(T_PLC_MS,N) OR SHL(DWORD#1,N)-1) + OFFSET;
END_IF;
*)

(* From OSCAT library, www.oscat.de

this is a temporary T_PLC_MS FB until OpenPLC gets it's own time() functionality *)

(* PLC_TIME and Global variables PLC_SCAN_CYCL and PLC_CYCL_TIME required *)]]></xhtml:p>
						
          
					</ST>
					
        
				</body>
				
        
				<documentation>
					
          
					<xhtml:p><![CDATA[Output current execution time in miliseconds]]></xhtml:p>
					
        
				</documentation>
				
      
			</pou>
			

		</pous>
	</types>
	<instances>
		<configurations>
			<configuration name="config">
				<resource name="resource1">
					<task name="task0" priority="0" interval="T#20ms">
						<pouInstance name="instance0" typeName="PID_renamed"/>
					</task>
				</resource>
			</configuration>
		</configurations>
	</instances>
</project>
